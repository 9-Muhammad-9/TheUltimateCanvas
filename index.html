<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Media Editor - Free 14-Day Trial</title>
    <meta name="description" content="Free online photo and video editor with AI capabilities. Get 14 days of premium features to test our professional editing tools.">
    <meta name="keywords" content="photo editor, video editor, free trial, AI editing, premium features">
    <meta name="author" content="Ultimate Media Editor">
    
    <!-- Firebase App (core Firebase SDK) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <!-- Firebase Authentication -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <!-- Firebase Firestore -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #f72585;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4cc9f0;
            --warning: #ffba08;
            --danger: #f94144;
            --gray: #6c757d;
            --light-gray: #e9ecef;
            --premium: #ffd700;
            --trial: #7209b7;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7ff;
            color: var(--dark);
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1rem 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.8rem;
            font-weight: 700;
        }
        
        .logo-icon {
            font-size: 2.2rem;
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 1.5rem;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        
        nav a:hover {
            background-color: rgba(255, 255, 255, 极速加速器.1);
        }
        
        .auth-buttons {
            display: flex;
            gap: 1rem;
        }
        
        .btn {
            padding: 0.5rem 1.5rem;
            border: none;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background-color: var(--accent);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #e51278;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .btn-outline {
            background-color: transparent;
            border: 2px solid white;
            color: white;
        }
        
        .btn-outline:hover {
            background-color: white;
            color: var(--primary);
        }
        
        .btn-premium {
            background: linear-gradient(135deg, var(--premium), #ff8c00);
            color: var(--dark);
            font-weight: 700;
        }
        
        .btn-premium:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(255, 215, 0, 0.3);
        }
        
        .btn-trial {
            background: linear-gradient(135deg, var(--trial), #4361ee);
            color: white;
            font-weight: 700;
        }
        
        .btn-trial:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(114, 9, 183, 0.3);
        }
        
        /* Hero Section */
        .hero {
            padding: 4rem 0;
            text-align: center;
            background: linear-gradient(rgba(67, 97, 238, 0.05), rgba(58, 12, 163, 0.1)), url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" view极速加速器="0 0 100 100"><rect width="100" height="100" fill="%234361ee" fill-opacity="0.05"/><path d="M0 0L100 100" stroke="%234361ee" stroke-opacity="0.1" stroke-width="1"/><path d="M100 0L0 100" stroke="%234361ee" stroke-opacity="极速加速器.1" stroke-width="1"/></svg>');
            background-size: cover;
            position: relative;
        }
        
        .hero-content {
            position: relative;
            z-index: 2;
        }
        
        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--secondary);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 2rem;
            color: var(--gray);
        }
        
        .hero-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
            flex-wrap: wrap;
        }
        
        .btn-large {
            padding: 0.8rem 2rem;
            font-size: 1.1rem;
        }
        
        /* Trial Banner */
        .trial-banner {
            background: linear-gradient(135deg, var(--trial), #4361ee);
            color: white;
            padding: 1rem;
            text-align: center;
            font-weight: 600;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .trial-banner .timer {
            background: rgba(255, 255, 255, 0.2);
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-weight: 700;
        }
        
        /* Premium Banner */
        .premium-banner {
            background: linear-gradient(135deg, var(--premium), #ff8c00);
            color: var(--dark);
            padding: 1rem;
            text-align: center;
            font-weight: 600;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .premium-banner a {
            color: var(--secondary);
            text-decoration: underline;
            font-weight: 700;
            margin-left: 0.5rem;
        }
        
        /* Features Section */
        .section-title {
            text-align: center;
            margin: 3rem 0;
            color: var(--secondary);
            position: relative;
        }
        
        .section-title:after {
            content: '';
            display: block;
            width: 80px;
            height: 4px;
            background: var(--accent);
            margin: 0.5rem auto;
            border-radius: 2px;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 3rem 0;
        }
        
        .feature-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .premium-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--premium);
            color: var(--dark);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 700;
        }
        
        .trial-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--trial);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 700;
        }
        
        .feature-icon {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            height: 120px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 3rem;
            color: white;
        }
        
        .feature-content {
            padding: 1.5rem;
        }
        
        .feature-content h3 {
            margin-bottom: 0.5rem;
            color: var(--secondary);
        }
        
        /* Editor Tabs */
        .editor-container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            margin: 3rem 0;
        }
        
        .editor-tabs {
            display: flex;
            background: var(--light-gray);
            overflow-x: auto;
        }
        
        .editor-tab {
            padding: 1rem 2rem;
            cursor: pointer;
            font-weight: 600;
            color: var(--gray);
            transition: all 0.3s;
            white-space: nowrap;
        }
        
        .editor-tab.active {
            background: white;
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
        }
        
        .editor-content {
            display: none;
            padding: 2rem;
            min-height: 500px;
        }
        
        .editor-content.active {
            display: block;
        }
        
        .editor-interface {
            display: flex;
            gap: 2rem;
        }
        
        .editor-sidebar {
            width: 250px;
            background: var(--light);
            border-radius: 8px;
            padding: 1.5rem;
        }
        
        .editor-main {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .tool-category {
            margin-bottom: 1.5rem;
        }
        
        .tool-category h4 {
            margin-bottom: 0.8rem;
            color: var(--secondary);
            padding-bottom: 0.5极速加速器;
            border-bottom: 1px solid var(--light-gray);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .tool-list {
            list-style: none;
        }
        
        .tool-item {
            padding: 0.5rem 0;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: color 0.3s;
            position: relative;
        }
        
        .tool-item:hover {
            color: var(--primary);
        }
        
        .tool-item.premium:after {
            content: "PRO";
            background: var(--premium);
            color: var(--dark);
            font-size: 0.7rem;
            font-weight: 700;
            padding: 0.1rem 0.4rem;
            border-radius: 4px;
            margin-left: auto;
        }
        
        .tool-item.trial:after {
            content: "TRIAL";
            background: var(--trial);
            color: white;
            font-size: 0.7rem;
            font-weight: 700;
            padding: 0.1rem 0.4rem;
            border-radius: 4px;
            margin-left: auto;
        }
        
        .preview-area {
            background: var(--light);
            border: 2px dashed var(--light-gray);
            border-radius: 8px;
            height: 400px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            gap: 1rem;
            position: relative;
            overflow: hidden;
        }
        
        .preview-area i {
            font-size: 3rem;
            color: var(--gray);
        }
        
        .preview-image {
            max-width: 100%;
            max-height: 100%;
            display: none;
        }
        
        .controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        /* How to Use Section */
        .steps {
            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
            justify-content: center;
            margin: 3rem 0;
        }
        
        .step-card {
            background: white;
            border-radius: 8px;
            padding: 2rem;
            width: 250px;
            text-align: center;
            box-shadow: 0 5极速加速器 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s;
        }
        
        .step-card:hover {
            transform: translateY(-5px);
        }
        
        .step-number {
            width: 50px;
            height: 50px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            font-weight: 700;
            margin: 0 auto 1rem;
        }
        
        /* Ad Spaces */
        .ad-container {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            margin: 2rem 0;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .ad-placeholder {
            width: 100%;
            height: 120px;
            background: linear-gradient(45deg, var(--light-gray), #e9ecef);
            border-radius: 4px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--gray);
            font-weight: 600;
        }
        
        /* Footer */
        footer {
            background: var(--dark);
            color: white;
            padding: 3rem 0 1rem;
            margin-top: 4rem;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }
        
        .footer-section h3 {
            margin-bottom: 1.5rem;
            color: var(--success);
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 0.8rem;
        }
        
        .footer-links a {
            color: var(--light-gray);
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-links a:hover {
            color: var(--success);
        }
        
        .copyright {
            text-align: center;
            margin-top: 3rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--light-gray);
            font-size: 0.9rem;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.2);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
        }
        
        /* PayPal Section */
        .paypal-section {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin: 3rem 0;
            text-align: center;
        }
        
        .paypal-options {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }
        
        .paypal-option {
            background: var(--light);
            padding: 1.5rem;
            border-radius: 8px;
            width: 250px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .paypal-option h3 {
            color: var(--secondary);
            margin-bottom: 1rem;
        }
        
        .paypal-button {
            background: #0070ba;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 4px;
            text-decoration: none;
            display: inline-block;
            margin-top: 1rem;
            font-weight: 600;
        }
        
        /* Login Form */
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--light-gray);
            border-radius: 4px;
            font-size: 1rem;
        }
        
        .form-footer {
            text-align: center;
            margin-top: 1.5rem;
        }
        
极速加速器 .form-footer a {
            color: var(--primary);
            cursor: pointer;
        }
        
        /* User menu */
        .user-menu {
            display: none;
            align-items: center;
            gap: 1rem;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            background: var(--accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        /* Instructions Section */
        .instructions {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin: 3rem 0;
        }
        
        .instructions h2 {
            color: var(--secondary);
            margin-bottom: 1.5rem;
            text-align: center;
        }
        
        .instruction-steps {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .instruction-step {
            display: flex;
            gap: 1rem;
        }
        
        .instruction-number {
            background: var(--primary);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        .instruction-content h3 {
            color: var(--secondary);
            margin-bottom: 0.5rem;
        }
        
        /* Responsive Design */
        @media (max-width: 992px) {
            .editor-interface {
                flex-direction: column;
            }
            
            .editor-sidebar {
                width: 100%;
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }
            
            nav ul {
                gap: 0.5rem;
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .hero h1 {
                font-size: 2.2rem;
            }
            
            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .editor-tabs {
                overflow-x: scroll;
            }
            
            .editor-tab {
                padding: 1rem;
            }
            
            .paypal-options {
                flex-direction: column;
                align-items: center;
            }
            
            .instruction-step {
                flex-direction: column;
                text-align: center;
            }
        }
        
        /* Loading animation */
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .loading {
            animation: pulse 1.5s infinite;
        }
        
        /* AI Processing Animation */
        .ai-processing {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(67, 97, 238, 0.8);
            justify-content: center;
            align-items: center;
            flex-direction: column;
            color: white;
            z-index: 10;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 1rem;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Auth message */
        .auth-message {
            text-align: center;
            padding: 2rem;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin: 2rem 0;
        }
        
        .auth-required {
            display: none;
            text-align: center;
            padding: 2rem;
            background: var(--light);
            border-radius: 8px;
            margin: 2rem 0;
        }
        
        /* Device limit warning */
        .device-limit-warning {
            display: none;
            background: var(--danger);
            color: white;
            padding: 1rem;
            text-align: center;
            margin: 1rem 0;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <!-- Firebase Configuration -->
    <script>
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyC4mR6QcUO5a7qk6Xqo7Z8Jv9wK1lL2mN3O",
            authDomain: "ultimate-media-editor.firebaseapp.com",
            projectId: "ultimate-media-editor",
            storageBucket: "ultimate-media-editor.appspot.com",
            messagingSenderId: "123456789",
            appId: "1:123456789:web:abc123def456"
        };
        
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        
        // Device ID management
        function getDeviceId() {
            let deviceId = localStorage.getItem('deviceId');
            if (!deviceId) {
                deviceId = 'device_' + Math.random().toString(36).substr(2, 9);
                localStorage.setItem('deviceId', deviceId);
            }
            return deviceId;
        }
    </script>

    <!-- Trial Banner (shown when user is in trial period) -->
    <div class="trial-banner" id="trial-banner" style="display: none;">
        <div>
            <i class="fas fa-crown"></i> You're enjoying <strong>FREE Premium Trial</strong>
        </div>
        <div class="timer" id="trial-timer">
            <i class="fas fa-clock"></i> <span id="trial-time-remaining">14 days left</span>
        </div>
    </div>

    <!-- Premium Banner -->
    <div class="premium-banner">
        <span>Try all Premium Features FREE for 14 days - No credit card required</span>
        <a href="#" id="premium-link">Learn More</a>
    </div>

    <!-- Device Limit Warning -->
    <div class="device-limit-warning" id="device-limit-warning">
        <i class="fas fa-exclamation-triangle"></i> 
        <span>You can only be logged in on one device at a time. This device has been logged out.</span>
    </div>

    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon"><i class="fas fa-film"></i></span>
                    <span>Ultimate Media Editor</span>
                </div>
                <nav>
                    <ul>
                        <li><a href="#home">Home</a></li>
                        <li><a href="#features">Features</a></li>
                        <li><a href="#editor">Editor</a></li>
                        <li><a href="#instructions">Instructions</a></li>
                        <li><a href="#monetization">Pricing</a></li>
                    </ul>
                </nav>
                <div class="auth-buttons" id="auth-buttons">
                    <button class="btn btn-outline" id="login-btn">Sign In</button>
                    <button class="btn btn-trial" id="signup-btn">Start Free Trial</button>
                </div>
                <div class="user-menu" id="user-menu">
                    <div class="user-avatar" id="user-avatar">U</div>
                    <span id="username">User</span>
                    <button class="btn btn-outline" id="logout-btn">Logout</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="container">
            <div class="hero-content">
                <h1>Edit Photos & Videos Like a Pro</h1>
                <p>Get full access to all premium features for 14 days completely free. No credit card required.</p>
                <div class="hero-buttons">
                    <button class="btn btn-primary btn-large" onclick="checkAuthAndActivateEditor('photo')"><i class="fas fa-image"></i> Edit Photos</button>
                    <button class="btn btn-primary btn-large" onclick="checkAuthAndActivateEditor('video')"><i class="fas fa-video"></i> Edit Videos</button>
                    <button class="btn btn-trial btn-large" id="start-trial-btn"><i class="fas fa-crown"></i> Start Free Trial</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Ad Space -->
    <div class="container">
        <div class="ad-container">
            <div class="ad-placeholder">
                <span>Advertisement Space</span>
            </div>
        </div>
    </div>

    <!-- Features Section -->
    <section class="container" id="features">
        <h2 class="section-title">Powerful Editing Features</h2>
        <div class="features-grid">
            <div class="feature-card">
                <div class="trial-badge">FREE TRIAL</div>
                <div class="feature-icon"><i class="fas fa-robot"></i></div>
                <div class="feature-content">
                    <h3>AI-Powered Tools</h3>
                    <p>Automated background removal, object recognition, style transfer, image enhancement, and smart video editing with AI algorithms.</p>
                </div>
            </div>
            <div class="feature-card">
                <div class="feature-icon"><i class="fas fa-image"></i></div>
                <div class="feature-content">
                    <h3>Photo Editing</h3>
                    <p>Crop, resize, rotate, adjust brightness/contrast, apply filters, remove objects, retouch portraits, and add text or stickers.</p>
                </div>
            </div>
            <div class="feature-card">
                <div class="feature-icon"><i class="fas fa-video"></极速加速器></div>
                <div class="feature-content">
                    <h3>Video Editing</h3>
                    <p>Trim, cut, merge videos, add transitions, apply filters, adjust speed, add music, subtitles, and special effects.</p>
                </div>
            </div>
            <div class="feature-card">
                <div class="trial-badge">FREE TRIAL</div>
                <div class="feature-icon"><i class="fas fa-paint-brush"></i></div>
                <div class="feature-content">
                    <h3>Advanced Tools</h3>
                    <p>Layers, masks, curves, levels, color grading, chroma key, motion tracking, and professional-grade effects.</p>
                </div>
            </div>
            <极速加速器 class="feature-card">
                <div class="feature-icon"><i class="fas fa-download"></i></div>
                <div class="feature-content">
                    <h3>Analytics & Export</h3>
                    <p>Preview changes in real-time, compare before/after, and export in multiple formats and resolutions.</p>
                </div>
            </div>
            <div class="feature-card">
                <div class="trial-badge">FREE TRIAL</div>
                <div class="feature-icon"><i class="fas fa-cloud"></i></div>
                <div class="feature-content">
                    <h3>Cloud Saving</h3>
                    <p>Save your projects to the cloud and access them from any device. No need to download large files.</极速加速器>
                </div>
            </div>
        </div>
    </section>

    <!-- Auth Required Message -->
    <div class="container">
        <div class="auth-required" id="auth-required">
            <h2>Start Your Free 14-Day Trial</h2>
            <p>Create an account to access all premium features for 14 days completely free.</p>
            <div class="hero-buttons">
                <button class="btn btn-primary btn-large" id="auth-required-login">Sign In</button>
                <button class="btn btn-trial btn-large" id="auth-required-signup">Start Free Trial</button>
            </div>
        </div>
    </div>

    <!-- Editor Section (Hidden until login) -->
    <section class="container" id="editor" style="display: none;">
        <h2 class="section-title">Start Editing</h2>
        <div class="editor-container">
            <div class="editor-tabs">
                <div class="editor极速加速器 active" data-tab="photo"><i class="fas fa-image"></i> Photo Editor</div>
                <div class="editor-tab" data-tab="video"><i class="fas fa-video"></i> Video Editor</div>
                <div class="editor-tab" data-tab="ai"><i class="fas fa-robot"></i> AI Tools</div>
            </div>
            
            <div class="editor-content active" id="photo-editor">
                <div class="editor-interface">
                    <div class="editor-sidebar">
                        <div class="tool-category">
                            <h4><i class="fas fa-sliders-h"></i> Basic Adjustments</h4>
                            <ul class="tool-list">
                                <li class="tool-item"><i class="fas fa-crop-alt"></i> Crop & Rotate</li>
                                <li class="tool-item"><i class="fas fa-sun"></i> Brightness/Contrast</li>
                                <li class="tool-item"><i class="fas fa-palette"></i> Saturation</li>
                                <li class="tool-item"><i class="fas fa-adjust"></i> Exposure</li>
                                <li class="tool-item"><i class="fas fa-balance-scale"></i> Color Balance</li>
                            </ul>
                        </div>
                        <div class="tool-category">
                            <h4><i class="fas fa-filter"></i> Filters & Effects</h4>
                            <ul class="tool-list">
                                <li class="tool-item"><i class="fas fa-prescription-bottle"></i> Preset Filters</li>
                                <li class="tool-item"><i class="fas fa-landmark"></i> Vintage</li>
                                <li class="tool-item"><i class="fab fa-instagram"></i> Instagram Style</li>
                                <li class="tool-item trial"><i class="fas fa-paint-brush"></i> Artistic</li>
                            </ul>
                        </div>
                        <div class="tool-category">
                            <h4><i class="fas fa-robot"></i> AI Tools</h4>
                            <ul class="tool-list">
                                <li class="tool-item trial"><i class="fas fa-magic"></i> Enhance Quality</li>
                                <li class="tool-item trial"><i class="fas fa-cut"></i> Remove Background</li>
                                <li class="tool-item trial"><i class="fas fa-broom"></i> Remove Objects</li>
                                <li class="tool-item trial"><i class="fas fa-user-circle"></i> Retouch Portrait</li>
                            </ul>
                        </div>
                    </div>
                    <div class="editor-main">
                        <div class="preview-area">
                            <i class="fas fa-image"></i>
                            <p>Upload a photo to start editing</p>
                            <button class="btn btn-primary" id="upload-image-btn">Upload Image</button>
                            <img id="preview-img" class="preview-image" alt="Preview">
                            <div class="ai-processing" id="photo-ai-processing">
                                <div class="spinner"></div>
                                <p>AI is processing your image...</p>
                            </div>
                        </div>
                        <div class="controls">
                            <button class="btn btn-outline"><i class="fas fa-undo"></i> Undo</button>
                            <button class="btn btn-outline"><i class="fas fa-redo"></i> Redo</button>
                            <button class="btn btn-primary"><i class="fas fa-save"></i> Save & Export</button>
                            <button class="btn btn-trial" onclick="showPremiumModal()"><i class="fas fa-crown"></i> Remove Watermark</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="editor-content"极速加速器="video-editor">
                <div class="editor-interface">
                    <div class="editor-sidebar">
                        <div class="tool-category">
                            <h4><i class="fas fa-film"></i> Video Tools</h4>
                            <ul class="tool-list">
                                <li class="tool-item"><i class="fas fa-cut"></i> Trim & Cut</li>
                                <li class="tool-item"><i class="fas fa-object-group"></i> Merge Videos</li>
                                <li class="tool-item"><i class="fas fa-tachometer-alt"></i> Speed Adjustment</li>
                                <li class="tool-item"><i class="fas fa-backward"></i> Reverse</li>
                            </ul>
                        </div>
                        <div class="tool-category">
                            <h4><i class="fas极速加速器 fa-music"></i> Audio</h4>
                            <ul class="tool-list">
                                <li class="tool-item"><i class="fas fa-music"></i> Add Music</li>
                                <li class="tool-item trial"><i class="fas fa-microphone"></i> Voiceover</li>
                                <li class="tool-item"><i class="fas fa-volume-up"></i> Volume Control</li>
                                <li class="tool-item trial"><i class="fas fa-wave-square"></i> Audio Effects</li>
                            </ul>
                        </div>
                        <div class="tool-category">
                            <h4><i class="fas fa-star"></i> Effects</h4>
                            <ul class="tool-list">
                                <li class="tool-item"><i class="fas fa-exchange-alt"></i> Transitions</li>
                                <li class="tool-item"><i class="fas fa-filter"></i> Filters</li>
                                <li class="tool-item trial"><i class="fas fa-shapes"></i> Overlays</li>
                                <li class="tool-item trial"><i class="fas fa-square"></i> Picture-in-Picture</li>
                            </ul>
                        </div>
                    </div>
                    <div class="editor-main">
                        <div class="preview-area">
                            <i class="fas fa-video"></i>
                            <p>Upload a video to start editing</p>
                            <button class="btn btn-primary" id="upload-video-btn">Upload Video</button>
                            <video id="preview-video" class="preview-image" controls style="display: none;"></video>
                            <div class="ai-processing" id="video-ai-processing">
                                <div class="spinner"></div>
                                <p>AI is processing your video...</p>
                            </div>
                        </div>
                        <div class="controls">
                            <button class="btn btn-outline"><i class="fas fa-undo"></i> Undo</button>
                            <button class="btn btn-outline"><i class="fas fa-redo"></i> Redo</button>
                            <button class="btn btn-primary"><i class="fas fa-download"></i> Export Video</button>
                            <button class="btn btn-trial" onclick="showPremiumModal()"><i class="fas fa-crown"></i> HD Export</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="editor-content" id="ai-tools">
                <div class="editor-interface">
                    <div class="editor-sidebar">
                        <div class="tool-category">
                            <h4><i class="fas fa-camera"></i> AI Photo Tools</h4>
                            <ul class="tool-list">
                                <li class="tool-item trial"><i class="fas fa-expand"></i> Super Resolution</li>
                                <li class="tool-item trial"><i class="fas fa-paint-roller"></i> Style Transfer</li>
                                <li class="tool-item trial"><i class="fas fa-smile"></i> Face Enhancement</li>
                                <li class="tool-item trial"><i class="fas fa-image"></i> Background Replacement</极速加速器>
                            </ul>
                        </div>
                        <div class="tool-category">
                            <h4><i class="fas fa-video"></i> AI Video Tools</h4>
                            <ul class="tool-list">
                                <li class="tool-item trial"><i class="fas fa-crosshairs"></极速加速器> Motion Tracking</li>
                                <li class="tool-item trial"><i class="fas fa-closed-captioning"></i> Auto Captions</li>
                                <li class="tool-item trial"><i class="fas fa-theater-masks"></i> Green Screen Effect</li>
                                <li class="tool-item trial"><i class="fas fa-tv"></i> AI Video Upscaling</li>
                            </ul>
                        </div>
                        <div class="tool-category">
                            <h4><i class="fas fa-brain"></i> Advanced AI</h4>
                            <ul class="tool-list">
                                <li class="tool-item trial"><i class="fas fa-object-ungroup"></i> Object Recognition</li>
                                <li class="tool-item trial"><i class="fas fa-eye"></i> Deepfake Detection</li>
                                <li class="tool-item trial"><i class="fas fa-project-diagram"></i> Neural Filters</li>
                                <li class="tool-item trial"><i class="fas fa-crop"></i> Smart Composition</li>
                            </ul>
                        </div>
                    </div>
                    <div class="editor-main">
                        <div class="preview-area">
                            <i class="fas fa-robot"></i>
                            <p>Select an AI tool to get started</p>
                            <p class="small">AI processing may take a few moments</p>
                            <div class="ai-processing" id="ai极速加速器-tools-processing">
                                <极速加速器 class="spinner"></div>
                                <p>AI is processing your media...</p>
                            </div>
                        </div>
                        <div class="controls">
                            <button class="btn btn-outline"><i class="fas fa-eye"></i> Compare</button>
                            <button class="btn btn-primary" onclick="simulateAI()"><i class="fas fa-magic"></i> Apply AI Magic</button>
                            <button class="btn btn-trial" onclick="showPremiumModal()"><i class="fas fa-bolt"></i> Faster Processing</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Instructions Section -->
    <section class="container" id="instructions">
        <h2 class="section-title">How to Use Ultimate Media Editor</h2>
        
        <div class="instructions">
            <div class="instruction-steps">
                <div class="instruction-step">
                    <div class="instruction-number">1</div>
                    <div class="instruction-content">
                        <h3>Start Your Free Trial</h3>
                        <p>Click the "Start Free Trial" button and create your account. You'll immediately get access to all premium features for 14 days.</p>
                    </div>
                </div>
                
                <div class="instruction-step">
                    <div class="instruction-number">2</div>
                    <div class="instruction-content">
                        <h3>Upload Your Media</h3>
                        <p>Click on either "Edit Photos" or "Edit Videos" and upload your media files. We support all common image and video formats.</p>
                    </div>
                </div>
                
                <div class="instruction-step">
                    <div class="instruction-number">3</div>
                    <div class="instruction-content">
                        <h3>Explore Editing Tools</h3>
                        <p>Use the sidebar to access different editing tools. Features marked with "TRIAL" are premium features available during your trial period.</p>
                    </div>
                </div>
                
                <div class="instruction-step">
                    <div class="instruction-number">4</div>
                    <div class="instruction-content">
                        <h3>Apply AI Enhancements</h3>
                        <p>Try our AI-powered tools for automatic enhancements, background removal, and other advanced edits with just one click.</p>
                    </div>
                </div>
                
                <div class="instruction-step">
                    <div class="instruction-number">5</div>
                    <div class="instruction-content">
                        <h3>Save and Export</h3>
                        <p>Once you're happy with your edits, save your project and export it in your preferred format and quality settings.</p>
                    </div>
                </div>
                
                <div class="instruction-step">
                    <div class="instruction-number">6</div>
                    <div class="instruction-content">
                        <h3>Upgrade to Keep Access</h3>
                        <p>After your 14-day trial, upgrade to a premium plan to continue using all the advanced features you've been enjoying.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Monetization Section -->
    <section class="container" id="monetization">
        <h2 class="section-title">Pricing Plans</h2>
        
        <div class="paypal-section">
            <h3>Continue Using Premium Features After Your Trial</h3>
            <p>Upgrade to a paid plan to keep access to all the premium features you've been using during your trial.</p>
            
            <div class="paypal-options">
                <div class="paypal-option">
                    <h4>Monthly Plan</h4>
                    <p>Perfect for occasional users</p>
                    <p class="price">$9.99/month</p>
                    <!-- Replace with your actual PayPal subscription button code -->
                    <a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=MONTHLY_PLAN" 
                       class="paypal-button" target="_blank">
                        <i class="fab fa-paypal"></i> Subscribe
                    </a>
                </div>
                
                <div class="paypal-option">
                    <h4>Annual Plan</h4>
                    <p>Best value - save 40%</p>
                    <p class="price">$69.99/year</p>
                    <!-- Replace with your actual PayPal subscription button code -->
                    <a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=ANNUAL_PLAN" 
                       class="paypal-button" target="_blank">
                        <i class="fab fa-paypal"></i> Subscribe
                    </a>
                </div>
                
                <div class="paypal-option">
                    <h4>Lifetime Access</h4>
                    <p>One-time payment, forever access</p>
                    <p class="price">$199.99</p>
                    <!-- Replace with your actual PayPal buy now button code -->
                    <a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=LIFETIME" 
                       class="paypal-button" target="_blank">
                        <i class="fab fa-paypal"></i> Buy Now
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Ultimate Media Editor</h3>
                    <p>The most comprehensive free online photo and video editor with AI capabilities.</p>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="#home">Home</a></li>
                        <li><a href="#features">Features</a></li>
                        <li><a href="#editor">Editor</a></li>
                        <li><a href="#instructions">Instructions</a></li>
                        <li><a href="#monetization">Pricing</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Resources</h3>
                    <ul class="footer-links">
                        <li><a href="#">Tutorials</a></li>
                        <li><a href="#">Blog</a></li>
                        <li><a href="#">FAQ</a></li>
                        <li><a href="#">Support</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Legal</h3>
                    <ul class="footer-links">
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                        <li><a href="#">Copyright</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2023 Ultimate Media Editor. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Login Modal -->
    <div class="modal" id="login-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Sign In</h2>
                <button class="close-modal" data-modal="login-modal">&times;</button>
            </div>
            <form id="login-form">
                <div class="form-group">
                    <label for="login-email">Email</label>
                    <input type="email" id="login-email" required>
                </div>
                <div class="form-group">
                    <label for="login-password">Password</label>
                    <input type="password" id="login-password" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Sign In</button>
                <div class="form-footer">
                    <p>Don't have an account? <a id="show-signup">Start Free Trial</a></p>
                </div>
            </form>
        </div>
    </div>

    <!-- Signup Modal -->
    <div class="modal" id="signup-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Start Your Free Trial</h2>
                <button class="close-modal" data-modal="signup-modal">&times;</button>
            </div>
            <form id="signup-form">
                <div class="form-group">
                    <label for="signup-name">Full Name</label>
                    <input type="text" id="signup-name" required>
                </div>
                <div class="form-group">
                    <label for="signup-email">Email</label>
                    <input type="email" id="signup-email" required>
                </div>
                <div class="form-group">
                    <label for="signup-password">Password (min 6 characters)</label>
                    <input type="password" id="signup-password" minlength="6" required>
                </div>
                <button type="submit" class="btn btn-trial" style="width: 100%;">Start 14-Day Free Trial</button>
                <div class="form-footer">
                    <p>Already have an account? <a id="show-login">Sign In</a></p>
                </div>
            </form>
        </div>
    </div>

    <!-- Premium Modal -->
    <div class="modal" id="premium-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Upgrade to Premium</h2>
                <button class="close-modal" data-modal="premium-modal">&times;</button>
            </div>
            <div class="feature-content">
                <h3>Keep All Features After Your Trial</h3>
                <p>Your free trial will expire in <span id="trial-expiry-days">14</span> days. Upgrade now to continue using:</p>
                <ul>
                    <li>AI-powered editing tools</li>
                    <li>Advanced filters and effects</li>
                    <li>Priority processing</li>
                    <li>HD and 4K export options</li>
                    <li>Cloud storage for your projects</li>
                </ul>
                <div style="text-align: center; margin-top: 2rem;">
                    <button class="btn btn-premium btn-large">Subscribe Now - $9.99/month</button>
                    <p style="margin-top: 1rem; font-size: 0.9rem;">Save 40% with annual billing</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Firebase Authentication Functions
        function signUp(email, password, name) {
            return auth.createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    const user = userCredential.user;
                    
                    // Update user profile with name
                    return user.updateProfile({
                        displayName: name
                    }).then(() => {
                        // Create user document in Firestore with trial information
                        const trialEndDate = new Date();
                        trialEndDate.setDate(trialEndDate.getDate() + 14); // 14-day trial
                        
                        return db.collection('users').doc(user.uid).set({
                            email: email,
                            name: name,
                            trialStart: new Date(),
                            trialEnd: trialEndDate,
                            deviceId: getDeviceId(),
                            premium: false
                        }).then(() => user);
                    });
                });
        }

        function signIn(email, password) {
            return auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    const user = userCredential.user;
                    
                    // Check device limit
                    return db.collection('users').doc(user.uid).get()
                        .then((doc) => {
                            if (doc.exists) {
                                const userData = doc.data();
                                const currentDeviceId = getDeviceId();
                                
                                if (userData.deviceId !== currentDeviceId) {
                                    // Device limit exceeded - sign out and show warning
                                    signOut();
                                    document.getElementById('device-limit-warning').style.display = 'block';
                                    throw new Error('You can only be logged in on one device at a time.');
                                }
                            }
                            return user;
                        });
                });
        }

        function signOut() {
            return auth.signOut();
        }

        // Check if user is logged in
        function checkAuth() {
            return new Promise((resolve) => {
                auth.onAuthStateChanged((user) => {
                    if (user) {
                        resolve(user);
                    } else {
                        resolve(null);
                    }
                });
            });
        }

        // Check trial status
        function checkTrialStatus(user) {
            return db.collection('users').doc(user.uid).get()
                .then((doc) => {
                    if (doc.exists) {
                        const userData = doc.data();
                        const now = new Date();
                        const trialEnd = userData.trialEnd.toDate();
                        
                        return {
                            inTrial: now < trialEnd,
                            trialEnd: trialEnd,
                            premium: userData.premium || false
                        };
                    }
                    return { inTrial: false, trialEnd: null, premium: false };
                });
        }

        // UI Management Functions
        function showModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
        }

        function hideModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function updateUI(user, trialInfo) {
            const authButtons = document.getElementById('auth-buttons');
            const userMenu = document.getElementById('user-menu');
            const userAvatar = document.getElementById('user-avatar');
            const username = document.getElementById('username');
            const editorSection = document.getElementById('editor');
            const authRequired = document.getElementById('auth-required');
            const trialBanner = document.getElementById('trial-banner');
            const monetizationSection = document.getElementById('monetization');
            
            if (user) {
                // User is signed in
                authButtons.style.display = 'none';
                userMenu.style.display = 'flex';
                editorSection.style.display = 'block';
                authRequired.style.display = 'none';
                monetizationSection.style.display = 'block';
                
                // Set user info
                const displayName = user.displayName || user.email;
                username.textContent = displayName;
                userAvatar.textContent = displayName.charAt(0).toUpperCase();
                
                // Show trial banner if in trial
                if (trialInfo.inTrial) {
                    trialBanner.style.display = 'flex';
                    startTrialTimer(trialInfo.trialEnd);
                } else {
                    trialBanner.style.display = 'none';
                }
                
                // Update premium features visibility
                updatePremiumFeaturesVisibility(trialInfo.inTrial || trialInfo.premium);
            } else {
                // User is signed out
                authButtons.style.display = 'flex';
                userMenu.style.display = 'none';
                editorSection.style.display = 'none';
                authRequired.style.display = 'block';
                monetizationSection.style.display = 'none';
                trialBanner.style.display = 'none';
            }
        }

        function updatePremiumFeaturesVisibility(hasAccess) {
            // Show/hide premium features based on access
            const premiumFeatures = document.querySelectorAll('.tool-item.trial, .tool-item.premium');
            premiumFeatures.forEach(feature => {
                if (hasAccess) {
                    feature.style.opacity = '1';
                    feature.style.pointerEvents = 'auto';
                } else {
                    feature.style.opacity = '0.5';
                    feature.style.pointerEvents = 'none';
                }
            });
        }

        function startTrialTimer(trialEndDate) {
            function updateTimer() {
                const now = new Date();
                const timeRemaining = trialEndDate - now;
                
                if (timeRemaining <= 0) {
                    document.getElementById('trial-time-remaining').textContent = 'Trial expired';
                    // Trial ended - refresh the page to update UI
                    location.reload();
                    return;
                }
                
                const days = Math.floor(timeRemaining / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeRemaining % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                
                document.getElementById('trial-time-remaining').textContent = `${days} days, ${hours} hours left`;
            }
            
            // Update immediately and then every hour
            updateTimer();
            setInterval(updateTimer, 3600000); // Update every hour
        }

        // Event Listeners
        document.getElementById('login-btn').addEventListener('click', () => {
            showModal('login-modal');
        });

        document.getElementById('signup-btn').addEventListener('click', () => {
            showModal('signup-modal');
        });

        document.getElementById('start-trial-btn').addEventListener('click', () => {
            showModal('signup-modal');
        });

        document.getElementById('show-signup').addEventListener('click', () => {
            hideModal('login-modal');
            showModal('signup-modal');
        });

        document.getElementById('show-login').addEventListener('click', () => {
            hideModal('signup-modal');
            showModal('login-modal');
        });

        document.getElementById('auth-required-login').addEventListener('click', () => {
            showModal('login-modal');
        });

        document.getElementById('auth-required-signup').addEventListener('click', () => {
            showModal('signup-modal');
        });

        document.getElementById('logout-btn').addEventListener('click', () => {
            signOut().then(() => {
                updateUI(null, {});
            }).catch((error) => {
                alert('Error signing out: ' + error.message);
            });
        });

        document.querySelectorAll('.close-modal').forEach(button => {
            button.addEventListener('click', () => {
                const modalId = button.getAttribute('data-modal');
                hideModal(modalId);
            });
        });

        document.getElementById('login-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            signIn(email, password)
                .then((user) => {
                    return checkTrialStatus(user).then(trialInfo => {
                        hideModal('login-modal');
                        document.getElementById('login-form').reset();
                        updateUI(user, trialInfo);
                    });
                })
                .catch((error) => {
                    if (error.message.includes('device')) {
                        // Device limit error already handled
                    } else {
                        alert('Error signing in: ' + error.message);
                    }
                });
        });

        document.getElementById('signup-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('signup-name').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            
            signUp(email, password, name)
                .then((user) => {
                    return checkTrialStatus(user).then(trialInfo => {
                        hideModal('signup-modal');
                        document.getElementById('signup-form').reset();
                        updateUI(user, trialInfo);
                    });
                })
                .catch((error) => {
                    alert('Error creating account: ' + error.message);
                });
        });

        // Check auth state on page load
        document.addEventListener('DOMContentLoaded', () => {
            checkAuth().then(user => {
                if (user) {
                    checkTrialStatus(user).then(trialInfo => {
                        updateUI(user, trialInfo);
                    });
                } else {
                    updateUI(null, {});
                }
            });
        });

        // Editor Functions
        function checkAuthAndActivateEditor(type) {
            checkAuth().then(user => {
                if (user) {
                    checkTrialStatus(user).then(trialInfo => {
                        if (trialInfo.inTrial || trialInfo.premium) {
                            activateEditor(type);
                        } else {
                            showModal('premium-modal');
                        }
                    });
                } else {
                    showModal('login-modal');
                }
            });
        }

        function activateEditor(type) {
            // Remove active class from all tabs and contents
            document.querySelectorAll('.editor-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.editor-content').forEach(c => c.classList.remove('active'));
            
            // Activate the selected editor tab
            const tab = document.querySelector(`.editor-tab[data-tab="${type}"]`);
            tab.classList.add('active');
            document.getElementById(`${type}-editor`).classList.add('active');
            
            // Scroll to editor section
            document.getElementById('editor').scrollIntoView({ behavior: 'smooth' });
        }
        
        // Simulate AI processing
        function simulateAI() {
            const processingElement = document.getElementById('ai-tools-processing');
            processingElement.style.display = 'flex';
            
            setTimeout(()极速加速器 {
                processingElement.style.display = 'none';
                alert('AI processing complete! This is a simulation. In a real application, your media would be enhanced now.');
            }, 3000);
        }
        
        // Show premium modal
        function showPremiumModal() {
            checkAuth().then(user => {
                if (user) {
                    checkTrialStatus(user).then(trialInfo => {
                        if (trialInfo.inTrial) {
                            const daysLeft = Math.ceil((trialInfo.trialEnd - new Date()) / (1000 * 60 * 60 * 24));
                            document.getElementById('trial-expiry-days').textContent = daysLeft;
                        }
                        showModal('premium-modal');
                    });
                } else {
                    showModal('login-modal');
                }
            });
        }
        
        // Image upload simulation
        document.getElementById('upload-image-btn').addEventListener('click', () => {
            // In a real app, this would open a file dialog
            // For demo purposes, we'll use a sample image
            const previewImg = document.getElementById('preview-img');
            previewImg.src = 'https://via.placeholder.com/600x400?text=Uploaded+Image';
            previewImg.style.display = 'block';
            
            // Hide the upload prompt
            const uploadPrompt = previewImg.previousElementSibling;
            uploadPrompt.previousElementSibling.style.display = 'none';
            uploadPrompt.style.display = 'none';
        });
        
        // Video upload simulation
        document.getElementById('upload-video-btn').addEventListener('click', () => {
            // In a real app, this would open a file dialog
            alert('Video upload dialog would appear here. For this demo, we are simulating the feature.');
        });
        
        // Add loading state to buttons for better UX
        document.querySelectorAll('.btn').forEach(btn => {
            btn.addEventListener('click', function(e) {
                if (this.classList.contains('btn-premium') || this.id === 'upload-image-btn' || this.id === 'upload-video-btn') {
                    return; // Skip for these buttons
                }
                
                const originalText = this.innerHTML;
                this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
                this.classList.add('loading');
                
                setTimeout(() => {
                    this.innerHTML = originalText;
                    this.classList.remove('loading');
                }, 1500);
            });
        });
    </script>
</body>
</html>